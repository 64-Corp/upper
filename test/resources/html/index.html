<html>
    <head>
        <script src='/upper.js'></script>
        <script src='/socket.io/socket.io.js'></script>
    </head>
    <body>
        <input id="fileUpload" type="file" />
        <img id="preview" style="max-width:300px;" />
        <script>
            (function () {
                var socket = io.connect();

                var upper = Upper({ debug: true });
                var uploader = upper.listen(window.document.getElementById('fileUpload'))
                .on('preview', function (url) {
                    window.document.getElementById('preview').setAttribute('src', url);
                })
                .on('progress', function (progress) {
                    console.log(JSON.stringify(progress, null, 4));
                });
            })();

        </script>
    </body>
</html>
